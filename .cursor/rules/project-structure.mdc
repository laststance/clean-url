---
alwaysApply: true
description: Clean URL Chrome Extension Project Structure
---

# Clean URL Chrome Extension Project Structure

This is a Chrome extension that removes tracking parameters from URLs when users click the extension icon. The project follows Manifest V3 architecture with comprehensive testing.

## Core Architecture

### Extension Files
- **[manifest.json](mdc:manifest.json)** - Manifest V3 configuration, permissions, and metadata
- **[popup.html](mdc:popup.html)** - Extension popup interface
- **[popup.js](mdc:popup.js)** - Popup logic and user interaction handling
- **[popup.css](mdc:popup.css)** - Popup styling and UI components
- **[background.js](mdc:background.js)** - Service worker for badge updates and background tasks

### Core Logic
- **[clean-url-logic.js](mdc:clean-url-logic.js)** - Main URL cleaning algorithm and tracking parameter removal
- **[icons/](mdc:icons/)** - Extension icons (16px, 32px, 48px, 128px) for different UI contexts

### Testing Infrastructure
- **[tests/unit/](mdc:tests/unit/)** - Jest unit tests for URL cleaning logic
- **[tests/e2e/](mdc:tests/e2e/)** - Playwright E2E tests for extension functionality
- **[tests/test-urls.json](mdc:tests/test-urls.json)** - Comprehensive test fixtures with real-world URLs
- **[jest.config.cjs](mdc:jest.config.cjs)** - Jest configuration for unit testing
- **[playwright.config.js](mdc:playwright.config.js)** - Playwright configuration for E2E testing

## Workflow
1. User clicks extension icon
2. [popup.js](mdc:popup.js) loads and calls [clean-url-logic.js](mdc:clean-url-logic.js)
3. Current tab URL is cleaned of tracking parameters
4. User sees cleaned URL in popup with removal count
5. Optional: Navigate to cleaned URL via chrome.tabs.update()

## Key Features
- **Manual activation only** - No automatic URL cleaning
- **Comprehensive tracking removal** - UTM, social media, email, affiliate trackers
- **Preserve legitimate parameters** - Only remove known tracking patterns
- **Visual feedback** - Show removal count and cleaned URL
- **Robust testing** - Unit tests + E2E tests with real-world scenarios
